{{ $page := . }}
{{ $depth := 0 }}

{{ if reflect.IsMap . }}
 {{ $page = .page }}
 {{ $depth = .depth }}
{{ end }}

{{ with $page.Parent }}
  {{ if $page.IsSection }}
    {{ $depth = add $depth 1 }}
  {{ end }}
  {{ partial "render-section-depth" (dict "page" . "depth" $depth) }}
{{- else }}
  {{ $depth }}
{{- end }}
{{- /**/ -}}
