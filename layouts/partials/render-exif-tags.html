{{- /*
EXIF specification, version 2.32, revised May 2019:
https://web.archive.org/web/20190624045241if_/http://www.cipa.jp:80/std/documents/e/DC-008-Translation-2019-E.pdf
*/}}

{{- /* Define lookup tables. Do not change element order. See https://exiftool.org/TagNames/EXIF.html */}}
{{- $meteringModes := slice
  "unknown"
  "Average"
  "CenterWeightedAverage"
  "Spot"
  "MultiSpot"
  "Pattern"
  "Partial"
}}
{{- $exposureModes := slice
  "Auto exposure"
  "Manual exposure"
  "Auto bracket"
}}
{{- $exposurePrograms := slice
  "Not defined"
  "Manual"
  "Normal program"
  "Aperture priority"
  "Shutter priority"
  "Creative program"
  "Action program"
  "Portrait mode"
  "Landscape mode"
  "Bulb"
}}
{{- $whiteBalances := slice
  "Auto white balance"
  "Manual white balance"
}}

{{- /* Get values. */}}
{{- $aperture := printf "f/%.1f" .Tags.FNumber }}
{{- $cameraModel := .Tags.Model }}
{{- $captureDate := (.Tags.DateTimeOriginal).Format "02 January 2006 15:04 -07:00" }}
{{- $exposureBias := printf "%.2f" .Tags.ExposureBiasValue }}
{{- $exposureMode := or (index $exposureModes .Tags.ExposureMode) "reserved" }}
{{- $exposureProgram := or (index $exposurePrograms .Tags.ExposureProgram) "reserved" }}
{{- $exposureTime := printf "%s seconds" .Tags.ExposureTime }}
{{- $focalLength := printf "%.0f mm" .Tags.FocalLength }}
{{- $iso := .Tags.ISOSpeedRatings }}
{{- $lensModel := .Tags.LensModel }}
{{- $meteringMode := or (index $meteringModes .Tags.MeteringMode) "other" }}
{{- $whiteBalance := or (index $whiteBalances .Tags.WhiteBalance) "reserved" }}

{{- /* Render. */}}
<h3>EXIF Data</h3>
<table>
  <tbody>
    <tr><td>Capture Date</td><td>{{ $captureDate }}</td></tr>
    <tr><td>Camera Model</td><td>{{ $cameraModel }}</td></tr>
    <tr><td>Lens</td><td>{{ $lensModel }}</td></tr>
    <tr><td>ISO</td><td>{{ $iso }}</td></tr>
    <tr><td>Focal Length</td><td>{{ $focalLength }}</td></tr>
    <tr><td>Aperture</td><td>{{ $aperture }}</td></tr>
    <tr><td>Exposure Time</td><td>{{ $exposureTime }}</td></tr>
    <tr><td>Exposure Mode</td><td>{{ $exposureMode }}</td></tr>
    <tr><td>Exposure Program</td><td>{{ $exposureProgram }}</td></tr>
    <tr><td>Exposure Bias</td><td>{{ $exposureBias }}</td></tr>
    <tr><td>Metering</td><td>{{ $meteringMode }}</td></tr>
    <tr><td>White Balance</td><td>{{ $whiteBalance }}</td></tr>
  </tbody>
</table>
