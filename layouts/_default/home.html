{{ define "main" }}
  {{ with .Params.details }}
    <p>Details: <a href="{{ . }}">{{ . }}</a></p>
  {{ end }}
  {{ with .Params.description }}
    <p>Description: {{ . }}</p>
  {{ end }}
  {{ with or .Params.url .Params.details }}
    <hr>
  {{ end }}
  {{ .Content }}

  <h2>Data</h2>
  <pre>{{ jsonify (dict "indent" "  ") site.Data.shows }}</pre>

  <h2>The top 2 networks</h2>
  {{ with partial "get-top-n" (dict "data" "shows" "key" "Network" "qty" 2) }}
    <ul>
    {{ range $k, $v := . }}
      <li>{{ printf "#%d - %s" (add 1 $k) $v }}</li>
    {{ end }}
    </ul>
  {{ end }}

  <h2>The top 2 genres</h2>
  {{ with partial "get-top-n" (dict "data" "shows" "key" "genre" "qty" 2) }}
    <ul>
    {{ range $k, $v := . }}
      <li>{{ printf "#%d - %s" (add 1 $k) $v }}</li>
    {{ end }}
    </ul>
  {{ end }}

{{ end }}
