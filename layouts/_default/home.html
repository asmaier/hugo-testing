{{ define "main" }}
  {{ with .Params.details }}
    <p>Details: <a href="{{ . }}">{{ . }}</a></p>
  {{ end }}
  {{ with .Params.description }}
    <p>Description: {{ . }}</p>
  {{ end }}
  {{ with or .Params.url .Params.details }}
    <hr>
  {{ end }}
  {{ .Content }}

  {{ $years := slice }}
  {{ $read := slice }}
  {{ range site.Data.read }}
    {{ $year := (time.AsTime .date).Year }}
    {{ $read = $read | append (merge . (dict "year" $year)) }}
    {{ $years = $years | append $year }}
  {{ end }}
  {{ $years := $years | uniq | sort }}

  <pre>{{ jsonify (dict "indent" "  ") $read }}</pre>

  {{ range $years }}
  <h2>{{ . }}</h2>
  {{ range where $read "year" . }}
    <pre>
      Title: {{ .title }}
      Author: {{ .author }}
      Rating: {{ .rating }}
  </pre>
  {{ end }}

{{ end }}


{{ end }}
